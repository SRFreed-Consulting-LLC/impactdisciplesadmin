
<div id="form-container">
  <dx-form id="form" [formData]="event" [colCount]="10">
    <dxi-item dataField="startDate" editorType="dxDateBox" [colSpan]="5">
      <dxo-label template="Start Date"></dxo-label>
    </dxi-item>
    <dxi-item dataField="endDate" editorType="dxDateBox" [colSpan]="5">
      <dxo-label template="End Date"></dxo-label>
    </dxi-item>
    <dxi-item dataField="eventName" [colSpan]="10">
      <dxo-label template="Event Name"></dxo-label>
    </dxi-item>
    <dxi-item
      dataField="organization"
      editorType="dxSelectBox"
      [colSpan]="5"
      [editorOptions]="{ items: organizations, searchEnabled: true, displayExpr: 'name', valueExpr: 'id'  }">
      <dxo-label template="Organization"></dxo-label>
    </dxi-item>
    <dxi-item
      [colSpan]="5"
      dataField="location"
      editorType="dxSelectBox"
      [editorOptions]="{ items: locations, searchEnabled: true, displayExpr: 'name', valueExpr: 'id'  }">
      <dxo-label template="Location"></dxo-label>
    </dxi-item>
    <dxi-item
      itemType="group"
      [colSpan]="10">
      <dxi-item
        itemType="button"
        [colSpan]="10"
        alignItemLabels="right"
        [buttonOptions]="addSessionButtonOptions">
      </dxi-item>
    </dxi-item>

    <dxi-item
      itemType="group"
      caption="Training Sessions"
      [colSpan]="5"
      [template]="'sessionTemplate'">
    </dxi-item>
    <dxi-item
      *ngIf="selectedTrainingSession"
      caption="Session"
      itemType="group"
      [colSpan]="5"
      [colCount]="2">
      <dxi-item dataField="name" [colSpan]="2">
        <dxo-label template="Session Name"></dxo-label>
      </dxi-item>
      <dxi-item [dataField]="selectedTrainingSession?.time" editorType="dxDateBox" [colSpan]="2" [editorOptions]="{ type: 'datetime' }">
        <dxo-label template="Start Time"></dxo-label>
      </dxi-item>
      <dxi-item
        [dataField]="selectedTrainingSession?.coach"
        editorType="dxSelectBox"
        [colSpan]="2"
        [editorOptions]="{ items: coaches, searchEnabled: true, displayExpr: 'fullname', valueExpr: 'id'  }">
        <dxo-label template="Coach"></dxo-label>
      </dxi-item>
      <dxi-item
        [dataField]="selectedTrainingSession?.course"
        editorType="dxSelectBox"
        [colSpan]="2"
        [editorOptions]="{ items: courses, searchEnabled: true, displayExpr: 'title', valueExpr: 'id'  }">
        <dxo-label template="Course"></dxo-label>
      </dxi-item>
      <dxi-item
        itemType="button"
        [buttonOptions]="saveSessionButtonOptions">
      </dxi-item>
      <dxi-item
        itemType="button"
        [buttonOptions]="cancelSessionButtonOptions">
      </dxi-item>
    </dxi-item>




    <div *dxTemplate="let data of 'sessionTemplate'">
      <dx-list
        [dataSource]="data.formData.trainingSessions"
        [height]="300"
        [displayExpr]="getTrainingSessionDisplayName"
        [allowItemDeleting]="true"
        [itemDeleteMode]="'static'">
        <div *dxTemplate="let item of 'item'">
          <div>{{ item.name }}</div>
          <div *ngIf="item.course">{{ item.course.name}}</div>
          <div *ngIf="item.coach">{{ item.coach.firstName}}</div>
        </div>
      </dx-list>
    </div>
  </dx-form>
</div>
